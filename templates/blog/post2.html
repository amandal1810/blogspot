{% extends 'blog/base.html' %}
{% load staticfiles %}
<!-- overriding the title of the main blog with the post's title -->
{% block title %}{{ post.title }}{% endblock %}


<!-- Page Header -->
	<!-- Set your background image for this header on the line below. -->
	{% block header-image %}{% static "img/post-bg.jpg" %}{% endblock %}
	{% block header-heading %}{{ post.title }}{% endblock %}
	{% block header-subheading %}{% endblock %}
	{% block header-meta %}
	Posted by {{ post.author }} on {{ post.created }}<br/>
	Posted {{ post.created|timesince }} ago
	{% endblock %}

<!-- EXACTLY ONE POST AND ITS COMMENTS -->

{% block content %}
<div class="container">
        <div class="row">
	<article>
	<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
		<div class="body"><p>{{ post.body|safe }}</p></div>
	</div>
	</article>
</div>
</div>

<!-- comments section -->

	<div class="comments container">
	
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
		<hr>
		<h2>comments</h2>
		
		{% if comments %}
		{% for comment in comments %}
		<hr>
		<ul>
			<div class="comment-author">Commented by {{ comment.author }}</div>
			<div class="comment-time">Commented on {{ comment.created }} </div>
			<div class="comment-body">{{ comment.body }}</div>
			<div class="comment-timesince">{{ comment.created|timesince }} ago</div>
		</ul>
		
		{% endfor %}
		{% else %}
			No comments yet
		{% endif %}
		<hr>
			</div>
		</div>
	</div>

	<!-- add new comment section -->
	<hr>
  <div class="comment-add container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<h2>add comment</h2>
			<form action="{% url 'add_comment' post.id %}" method="POST">    	
			{% csrf_token %}

			<div class="row control-group">
				<div class="form-group col-xs-12 floating-label-form-group controls">
					<label>Name</label>
					<input type="text" name="author" size=40 class="form-control" placeholder="Name" id="author"></textarea>
					<p class="help-block text-danger"></p>
				</div>
			</div>
			<br>


			<div class="row control-group">
				<div class="form-group col-xs-12 floating-label-form-group controls">
					<label>Comment</label>
					<textarea name="body" rows="5" class="form-control" placeholder="Comment" id="body" required></textarea>
					<p class="help-block text-danger"></p>
				</div>
			</div>
			<br>
			<div id="success"></div>
					<div class="row">
					<div class="form-group col-xs-12">
			<button type="submit" class="btn btn-default">Submit</button>
			</div>
			</div>
		
			</form>
			
<!--
			<form action="{% url 'blog.views.add_comment' post.id %}" method="POST">    	
			{% csrf_token %}
			<input type="text" name="author" size="40" placeholder="enter your name here" />
			<br/>
			<textarea name="body" rows="8" cols="40" placeholder="enter your comment here" required></textarea>
			<br/>
			<input type="submit" class="btn btn-default" name="submit" value="Submit" />
			</form>
-->
		</div>
	</div>
  </div>
	
{% endblock %}

